<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>wolkasem的小站</title><link>https://blogs.wolkasem.cn/</link><description>wolkasem的小站</description><generator>Hugo 0.139.3 &amp; FixIt v0.3.15</generator><language>zh-CN</language><lastBuildDate>Sun, 24 Nov 2024 19:20:50 +0800</lastBuildDate><atom:link href="https://blogs.wolkasem.cn/index.xml" rel="self" type="application/rss+xml"/><item><title>Github Action</title><link>https://blogs.wolkasem.cn/posts/github-action/</link><pubDate>Sun, 24 Nov 2024 15:17:00 +0800</pubDate><guid>https://blogs.wolkasem.cn/posts/github-action/</guid><category domain="https://blogs.wolkasem.cn/categories/github/">Github</category><description>&lt;h2 id="为什么要配置自动发布" class="heading-element">&lt;span>为什么要配置自动发布&lt;/span>
 &lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e9%85%8d%e7%bd%ae%e8%87%aa%e5%8a%a8%e5%8f%91%e5%b8%83" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;p>基于前两个部分组成方案中，一次更新过程如下：&lt;/p>
&lt;ol>
&lt;li>在本地写好md文章&lt;/li>
&lt;li>用hugo发布到public/目录下&lt;/li>
&lt;li>复制到本地仓库(也可以将git本地仓库配置到public/目录下，但因为我同时也在用git管理md，这么做会将两个项目的git纠缠在一起，不够清爽，违背我的审美)&lt;/li>
&lt;li>再推到远程仓库&lt;/li>
&lt;/ol>
&lt;p>这样做的弊端是：&lt;/p>
&lt;ol>
&lt;li>本地必须管理两个git仓库，一个是hugo-md源码库，另一个是生成的静态网页库，增加了更新文章的复杂度；&lt;/li>
&lt;li>发布必须先发一个本地，然后手动上传，也增加了出错的风险。&lt;/li>
&lt;/ol>
&lt;p>一个理想的状态是，我只负责写文，和将好的md提交到git备份，然后就可以坐等网站内容更新了。github官方提供的GitHub Action正可以满足这个需求。&lt;/p>
&lt;p>这样的需求下，整个Github Action只需要做两件事：&lt;/p>
&lt;ol>
&lt;li>编译，生成静态文件&lt;/li>
&lt;li>部署，把静态文件移动到合适的位置
然后我们再通过git push来触发Github Action就可以了。&lt;/li>
&lt;/ol></description></item><item><title>第一篇文章</title><link>https://blogs.wolkasem.cn/posts/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</link><pubDate>Fri, 01 Jan 2021 15:04:05 +0800</pubDate><guid>https://blogs.wolkasem.cn/posts/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</guid><category domain="https://blogs.wolkasem.cn/categories/test/">Test</category><description>&lt;h2 id="第一篇文章" class="heading-element">&lt;span>第一篇文章&lt;/span>
 &lt;a href="#%e7%ac%ac%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;h2 id="特性" class="heading-element">&lt;span>特性&lt;/span>
 &lt;a href="#%e7%89%b9%e6%80%a7" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;h3 id="优雅的设计优雅的阅读体验时刻关注最新最热的新闻" class="heading-element">&lt;span>优雅的设计，优雅的阅读体验，时刻关注最新最热的新闻。&lt;/span>
 &lt;a href="#%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%e4%bc%98%e9%9b%85%e7%9a%84%e9%98%85%e8%af%bb%e4%bd%93%e9%aa%8c%e6%97%b6%e5%88%bb%e5%85%b3%e6%b3%a8%e6%9c%80%e6%96%b0%e6%9c%80%e7%83%ad%e7%9a%84%e6%96%b0%e9%97%bb" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h3>&lt;h3 id="支持-github-登录支持数据同步" class="heading-element">&lt;span>支持 Github 登录，支持数据同步。&lt;/span>
 &lt;a href="#%e6%94%af%e6%8c%81-github-%e7%99%bb%e5%bd%95%e6%94%af%e6%8c%81%e6%95%b0%e6%8d%ae%e5%90%8c%e6%ad%a5" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h3>&lt;h3 id="默认-30-分钟缓存登录用户可以强制拉取最新数据但也会根据内容源的更新间隔设置不同的爬虫间隔时间最快两分钟节约资源的同时避免频繁爬取而导致-ip-封禁" class="heading-element">&lt;span>默认 30 分钟缓存，登录用户可以强制拉取最新数据。但也会根据内容源的更新间隔设置不同的爬虫间隔时间（最快两分钟），节约资源的同时避免频繁爬取而导致 IP 封禁。&lt;/span>
 &lt;a href="#%e9%bb%98%e8%ae%a4-30-%e5%88%86%e9%92%9f%e7%bc%93%e5%ad%98%e7%99%bb%e5%bd%95%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e5%bc%ba%e5%88%b6%e6%8b%89%e5%8f%96%e6%9c%80%e6%96%b0%e6%95%b0%e6%8d%ae%e4%bd%86%e4%b9%9f%e4%bc%9a%e6%a0%b9%e6%8d%ae%e5%86%85%e5%ae%b9%e6%ba%90%e7%9a%84%e6%9b%b4%e6%96%b0%e9%97%b4%e9%9a%94%e8%ae%be%e7%bd%ae%e4%b8%8d%e5%90%8c%e7%9a%84%e7%88%ac%e8%99%ab%e9%97%b4%e9%9a%94%e6%97%b6%e9%97%b4%e6%9c%80%e5%bf%ab%e4%b8%a4%e5%88%86%e9%92%9f%e8%8a%82%e7%ba%a6%e8%b5%84%e6%ba%90%e7%9a%84%e5%90%8c%e6%97%b6%e9%81%bf%e5%85%8d%e9%a2%91%e7%b9%81%e7%88%ac%e5%8f%96%e8%80%8c%e5%af%bc%e8%87%b4-ip-%e5%b0%81%e7%a6%81" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h3>&lt;h2 id="部署" class="heading-element">&lt;span>部署&lt;/span>
 &lt;a href="#%e9%83%a8%e7%bd%b2" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;p>如果不需要登录，缓存，可以直接部署到 Cloudflare Pages，Vercel 等。Fork 之后在对应平台上导入即可。&lt;/p>
&lt;p>Cloudflare Pages 需要填入构建命令 pnpm run build, 构建输出文件夹 dist/output/public。&lt;/p>
&lt;p>登录涉及到 Github Oauth，只需要 创建一个 Github App 即可，不需要申请任何权限。Callback URL 为 &lt;a href="https://your-domain.com/api/oauth/github"target="_blank" rel="external nofollow noopener noreferrer">https://your-domain.com/api/oauth/github&lt;/a>。&lt;/p>
&lt;p>然后就会得到 Client ID 和 Client Secret。关于环境变量，不同平台有不同的填写位置，请关注 example.env.server 文件。如果本地运行，需要将其重命名为 .env.server，然后按照要求添加。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Github Clien ID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">G_CLIENT_ID=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Github Clien Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">G_CLIENT_SECRET=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># JWT Secret, 通常就用 Clien Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">JWT_SECRET=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 初始化数据库, 首次运行必须设置为 true，之后可以将其关闭
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INIT_TABLE=true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 是否启用缓存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ENABLE_CACHE=true&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>